@*@model IList<News.Controllers.NewsController.Categories>*@
@using Domain.Core;
@using Domain.Core.Entity
@using Domain.Core.Enums
@model List<Domain.Core.Entity.NewsItem>
@{
    ViewBag.Title = "Index";
    var hasCategory = ViewBag.HasCategory != null && (bool)ViewBag.HasCategory;
}

@if (Request.IsAuthenticated && !hasCategory)
{
    <div class="modal fade" id="helloModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"></button>
                    <h4 class="modal-title">
                        Привіт! Це SenTime. Так, як ви завітали до нас перший раз, допоможіть нам підібрати для вас те, що вас цікавить.
                        Для цього виберіть нижче декілька категорій новин, якими ви цікавитесь.
                    </h4>
                </div>
                <div class="modal-body row">
                    @{
                        var arrayCater = Enum.GetNames(typeof(Category));
                    }
                    @foreach (var category in arrayCater)
                    {
                        <div class="col-md-4">
                            <input type="checkbox" id="@category" value="@category" class="checkCategory" />
                            <label for="@category">@category</label>
                        </div>
                    }
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default save-category" data-dismiss="modal">Гаразд</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            $("#helloModal").modal("show");
        });
    </script>
                        }
<div class="row">

    <div class="row row-flex row-flex-wrap">

        @foreach (var n in Model)
        {
            @Html.Partial("_NewsItem", n)
        }

    </div><!--/row-->
    <hr>

</div>


<script>
    $(document).ready(function () {
        $(".chooseCategories").click(function () {
            $("#modalCategories").modal('show');
        });

        @*$('.category').click(function () {
            var id = $(this).attr('data-id');
            var categoryName = $(this).text();
            $.ajax({
                url: '@Url.Action("GetSubCategories","News")',
                data: { id: id },
                method: 'post',
                type: "html",
                success: function (data) {
                    $("#modalCategories").modal('hide');
                    $(".body-for-subCategoties").html(data);
                    $('#modalSubCategories').modal('show');
                    $(".name-category").text(categoryName);
                }
            });
        });*@

        $(".close-sub-category").click(function () {
            $("#modalCategories").modal('show');
            $('#modalSubCategories').modal('hide');
        });


    });
</script>
